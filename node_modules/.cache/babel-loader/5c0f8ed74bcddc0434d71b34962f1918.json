{"ast":null,"code":"import React,{Component}from'react';import items from'./data';const RoomContext=React.createContext();export default class RoomProvider extends Component{constructor(){super(...arguments);this.state={rooms:[],sortedRooms:[],featuredRooms:[],loading:true,type:'all',capacity:1,price:0,minPrice:0,maxPrice:0,minSize:0,maxSize:0,breakfast:false,pets:false};this.getRoom=slug=>{let tempRooms=[...this.state.rooms];const room=tempRooms.find(room=>room.slug===slug);return room;};this.handleChange=event=>{const target=event.target;const value=target.type==='checkbox'?target.checked:target.value;const name=event.target.name;this.setState({[name]:value},this.filterRooms);};this.filterRooms=()=>{let{rooms,type,capacity,price,minSize,maxSize,breakfast,pets}=this.state;// for all the rooms\nlet tempRooms=[...rooms];//transform value\ncapacity=parseInt(capacity);price=parseInt(price);//filter by type\nif(type!=='all'){tempRooms=tempRooms.filter(room=>room.type===type);}//filter by capacity\nif(capacity!==1){tempRooms=tempRooms.filter(room=>room.capacity>=capacity);}//filter by price\ntempRooms=tempRooms.filter(room=>room.price<=price);//filter by size\ntempRooms=tempRooms.filter(room=>room.size>=minSize&&room.size<=maxSize);//filter by breakfast\nif(breakfast){tempRooms=tempRooms.filter(room=>room.breakfast===true);}//filter by pets\nif(pets){tempRooms=tempRooms.filter(room=>room.pets===true);}//change state\nthis.setState({sortedRooms:tempRooms});};}componentDidMount(){let rooms=this.formatData(items);let featuredRooms=rooms.filter(room=>room.featured===true);let maxPrice=Math.max(...rooms.map(item=>item.price));let maxSize=Math.max(...rooms.map(item=>item.size));this.setState({rooms,featuredRooms,sortedRooms:rooms,loading:false,price:maxPrice,maxPrice,maxSize});}formatData(items){let tempItems=items.map(item=>{let id=item.sys.id;let images=item.fields.images.map(image=>image.fields.file.url);let room={...item.fields,images,id};return room;});return tempItems;}render(){return/*#__PURE__*/React.createElement(RoomContext.Provider,{value:{...this.state,getRoom:this.getRoom,handleChange:this.handleChange}},this.props.children);}}const RoomConsumer=RoomContext.Consumer;export function withRoomConsumer(Component){return function ConsumerWrapper(props){return/*#__PURE__*/React.createElement(RoomConsumer,null,value=>/*#__PURE__*/React.createElement(Component,Object.assign({},props,{context:value})));};}export{RoomProvider,RoomConsumer,RoomContext};","map":{"version":3,"names":["React","Component","items","RoomContext","createContext","RoomProvider","constructor","arguments","state","rooms","sortedRooms","featuredRooms","loading","type","capacity","price","minPrice","maxPrice","minSize","maxSize","breakfast","pets","getRoom","slug","tempRooms","room","find","handleChange","event","target","value","checked","name","setState","filterRooms","parseInt","filter","size","componentDidMount","formatData","featured","Math","max","map","item","tempItems","id","sys","images","fields","image","file","url","render","createElement","Provider","props","children","RoomConsumer","Consumer","withRoomConsumer","ConsumerWrapper","Object","assign","context"],"sources":["/home/david_mugambi/Documents/Luxury-hotel/src/context.js"],"sourcesContent":["import React, { Component } from 'react'\nimport items from './data';\nconst RoomContext = React.createContext();\n\n\nexport default class RoomProvider extends Component {\n    state={\n        rooms: [],\n        sortedRooms: [],\n        featuredRooms: [],\n        loading: true,\n        type: 'all',\n        capacity: 1,\n        price: 0,\n        minPrice: 0,\n        maxPrice: 0,\n        minSize: 0,\n        maxSize: 0,\n        breakfast: false,\n        pets: false\n    };\n    componentDidMount(){\n        let rooms = this.formatData(items);\n        let featuredRooms = rooms.filter(room => room.featured === true);\n        let maxPrice = Math.max(...rooms.map(item => item.price));\n        let maxSize = Math.max(...rooms.map(item => item.size));\n        this.setState({\n            rooms,\n            featuredRooms,\n            sortedRooms:rooms,\n            loading: false,\n            price : maxPrice,\n            maxPrice,\n            maxSize\n        })\n    }\n    formatData(items){\n        let tempItems = items.map(item =>{\n        let id = item.sys.id;\n        let images = item.fields.images.map(image => image.fields.file.url);\n        let room = {...item.fields,images,id}\n        return room;    \n        });\n        return tempItems;\n    }\n    getRoom = (slug) => {\n        let tempRooms = [...this.state.rooms];\n        const room = tempRooms.find((room)=>room.slug === slug);\n        return room;\n    }\n    handleChange = event => {\n        const target = event.target;\n        const value = target.type ==='checkbox' ? target.checked:target.value;\n        const name = event.target.name;\n        this.setState(\n        {\n            [name]: value\n        },this.filterRooms)\n    }\n    filterRooms = () => {\n        let{\n            rooms,type,capacity,price,minSize,maxSize,breakfast,pets\n        }= this.state\n        // for all the rooms\n        let tempRooms = [...rooms];\n\n        //transform value\n        capacity = parseInt(capacity)\n        price = parseInt(price)\n\n        //filter by type\n        if(type !=='all'){\n            tempRooms = tempRooms.filter(room => room.type === type)\n        }\n        //filter by capacity\n        if(capacity !==1){\n            tempRooms = tempRooms.filter(room => room.capacity >= capacity)\n        }\n        //filter by price\n        tempRooms = tempRooms.filter(room => room.price <= price);\n        \n        //filter by size\n        tempRooms = tempRooms.filter(room => room.size >= minSize && room.size <= maxSize)\n\n        //filter by breakfast\n        if(breakfast){\n            tempRooms = tempRooms.filter(room => room.breakfast === true)\n        }\n        //filter by pets\n        if(pets){\n            tempRooms = tempRooms.filter(room => room.pets === true)\n        }\n        //change state\n        this.setState({\n            sortedRooms: tempRooms\n        })\n    }\n    render() {\n        return (\n            <RoomContext.Provider value={{ ...this.state, getRoom: this.getRoom ,handleChange: this.handleChange }}>\n                {this.props.children}\n            </RoomContext.Provider>\n        )\n    }\n}\nconst RoomConsumer = RoomContext.Consumer;\n\nexport function withRoomConsumer(Component){\n    return function ConsumerWrapper(props){\n        return <RoomConsumer>\n            {value => <Component {...props} context={value} />}\n        </RoomConsumer>\n    }\n}\n\nexport{RoomProvider,RoomConsumer,RoomContext}\n     "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}